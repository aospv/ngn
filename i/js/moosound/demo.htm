<code><span style="color: #000000">
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Strict//EN"<br />&nbsp;&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;<br />&lt;html&nbsp;xmlns="http://www.w3.org/1999/xhtml"&nbsp;lang="en"&nbsp;xml:lang="en"&gt;<br />&lt;head&gt;<br />&lt;meta&nbsp;http-equiv="Content-Type"&nbsp;content="text/html;&nbsp;charset=iso-8859-1"&nbsp;/&gt;<br />&lt;title&gt;MooP3&nbsp;Player&lt;/title&gt;<br />&lt;script&nbsp;type="text/javascript"&nbsp;src="mootools-1.2.js"&gt;&lt;/script&gt;<br />&lt;script&nbsp;type="text/javascript"&nbsp;src="MooSound.js"&gt;&lt;/script&gt;<br /><br />&lt;style&nbsp;type="text/css"&gt;<br />#playlist&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;95%;<br />&nbsp;&nbsp;&nbsp;&nbsp;margin:&nbsp;auto;<br />}<br /><br />.song&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;100%;<br />&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;#f9f9f9;<br />&nbsp;&nbsp;&nbsp;&nbsp;border-right:&nbsp;1px&nbsp;solid&nbsp;#ccc;<br />&nbsp;&nbsp;&nbsp;&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#ccc;<br />&nbsp;&nbsp;&nbsp;&nbsp;padding:&nbsp;5px;<br />}<br /><br />.song.playing&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;border-top:&nbsp;#000;<br />&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;#ff9;<br />}<br /><br />.seekbar&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;#afa;<br />&nbsp;&nbsp;&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;#9f9;<br />&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;20px;<br />&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;0%;<br />&nbsp;&nbsp;&nbsp;&nbsp;cursor:&nbsp;pointer;<br />}<br /><br />.position&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;left:0;<br />&nbsp;&nbsp;&nbsp;&nbsp;position:&nbsp;relative;<br />&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;1px;<br />&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;20px;<br />&nbsp;&nbsp;&nbsp;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;#8f8;<br />&nbsp;&nbsp;&nbsp;&nbsp;border-right:&nbsp;1px&nbsp;solid&nbsp;#3f3;<br />}<br /><br />.song&nbsp;h3&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;margin:&nbsp;0;<br />}<br /><br />.controls&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;right;<br />&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;15%;<br />}<br /><br />.controls&nbsp;img&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;cursor:&nbsp;pointer;<br />}<br />&lt;/style&gt;<br />&lt;script&nbsp;type="text/javascript"&gt;<br /><br />window.addEvent('domready',&nbsp;function()&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;i&nbsp;=&nbsp;0;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;options&nbsp;=&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onRegister':&nbsp;function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i++;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.el&nbsp;=&nbsp;new&nbsp;Element('div',&nbsp;{'class':'song'});<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('h3',&nbsp;{'class':'title',&nbsp;text:this.url}).inject(this.el);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.controls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('div',&nbsp;{'class':'controls'}).inject(this.el);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.seekbar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('div',&nbsp;{'class':&nbsp;'seekbar'}).inject(this.el);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.position&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('div',&nbsp;{'class':'position'}).inject(this.seekbar);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.seekbar.set('tween',&nbsp;{duration:this.options.progressInterval,&nbsp;unit:'%',&nbsp;link:&nbsp;'cancel'});<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.position.set('tween',&nbsp;{duration:this.options.positionInterval,&nbsp;unit:'%',&nbsp;link:&nbsp;'cancel'});<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.playEl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('img',&nbsp;{'class':'play',&nbsp;&nbsp;src:'img/play.png',id:'play'+i&nbsp;}).inject(this.controls);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.stopEl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('img',&nbsp;{'class':'stop',&nbsp;&nbsp;src:'img/stop.png',id:'stop'+i&nbsp;}).inject(this.controls);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pauseEl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Element('img',&nbsp;{'class':'pause',&nbsp;src:'img/pause.png',id:'pause'+i}).inject(this.controls);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.stopEl.addEvent('click',&nbsp;function()&nbsp;{&nbsp;this.stop();&nbsp;}.bind(this));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.playEl.addEvent('click',&nbsp;function()&nbsp;{&nbsp;this.start();&nbsp;}.bind(this));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pauseEl.addEvent('click',&nbsp;function()&nbsp;{&nbsp;this.pause();&nbsp;}.bind(this));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.seekbar.addEvent('click',&nbsp;function(e)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;coords&nbsp;=&nbsp;this.seekbar.getCoordinates();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ms&nbsp;=&nbsp;((e.page.x&nbsp;-&nbsp;coords.left)/coords.width)*this.duration;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.jumpTo(ms);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.bind(this));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.el.inject($('playlist'));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onLoad':&nbsp;function()&nbsp;{&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onPause':&nbsp;function()&nbsp;{&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onPlay':&nbsp;function()&nbsp;{&nbsp;this.el.addClass('playing');&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onStop':&nbsp;function()&nbsp;{&nbsp;this.el.removeClass('playing');&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onProgress':&nbsp;function(loaded,&nbsp;total)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;percent&nbsp;=&nbsp;(loaded&nbsp;/&nbsp;total*100).round(2);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.seekbar.get('tween').start('width',&nbsp;percent&nbsp;*&nbsp;.85);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onPosition':&nbsp;function(position,duration)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;percent&nbsp;=&nbsp;(position/duration*100).round(2);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.position.get('tween').start('left',&nbsp;percent);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onID3':&nbsp;function(key,&nbsp;value)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(key&nbsp;==&nbsp;"TIT2")&nbsp;{&nbsp;this.title.set('text',&nbsp;value);&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'onComplete':&nbsp;function()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Playlist.playRandom.delay(100,&nbsp;Playlist);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;};<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;//Note:&nbsp;I&nbsp;have&nbsp;some&nbsp;funky&nbsp;file&nbsp;serving&nbsp;going&nbsp;on&nbsp;in&nbsp;my&nbsp;widgets&nbsp;app,&nbsp;which&nbsp;means&nbsp;that<br />&nbsp;&nbsp;&nbsp;&nbsp;//the&nbsp;filesize&nbsp;isn't&nbsp;readily&nbsp;accessible.&nbsp;&nbsp;So&nbsp;it&nbsp;bugs&nbsp;out&nbsp;a&nbsp;bit&nbsp;in&nbsp;the&nbsp;official&nbsp;demo.<br />&nbsp;&nbsp;&nbsp;&nbsp;//You&nbsp;can&nbsp;try&nbsp;it&nbsp;at&nbsp;home&nbsp;for&nbsp;better&nbsp;luck.<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;songs&nbsp;=&nbsp;["mp3s/robot2.mp3"];&nbsp;//I&nbsp;only&nbsp;have&nbsp;one&nbsp;mp3.&nbsp;;_;&nbsp;(But&nbsp;you&nbsp;can&nbsp;add&nbsp;more!)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Playlist.loadSounds(songs,&nbsp;options);<br />&nbsp;&nbsp;&nbsp;&nbsp;$('play').addEvent('click',&nbsp;function(e)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.stop();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Playlist.playRandom();&nbsp;//Hm,&nbsp;I&nbsp;wonder&nbsp;what&nbsp;it&nbsp;will&nbsp;end&nbsp;up&nbsp;being.<br />&nbsp;&nbsp;&nbsp;&nbsp;});<br /><br />});<br /><br /><br />&lt;/script&gt;<br />&lt;/head&gt;<br /><br />&lt;body&gt;<br />&lt;div&nbsp;id="controls"&gt;&lt;a&nbsp;href="#"&nbsp;id="play"&gt;Play&nbsp;Random&lt;/a&gt;&lt;/div&gt;<br />&lt;p&gt;Note:&nbsp;The&nbsp;loading&nbsp;of&nbsp;this&nbsp;mp3&nbsp;is&nbsp;a&nbsp;little&nbsp;strange&nbsp;in&nbsp;the&nbsp;official&nbsp;demo&nbsp;because&nbsp;of&nbsp;the&nbsp;way&nbsp;my&nbsp;widget&nbsp;application&nbsp;serves&nbsp;files.&nbsp;&nbsp;There's&nbsp;no&nbsp;definitive&nbsp;bytesLoaded&nbsp;to&nbsp;work&nbsp;from,&nbsp;so&nbsp;the&nbsp;code&nbsp;makes&nbsp;do&nbsp;with&nbsp;what&nbsp;it&nbsp;has.&lt;/p&gt;<br />&lt;div&nbsp;id="playlist"&gt;&lt;/div&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br /></span>
</code>